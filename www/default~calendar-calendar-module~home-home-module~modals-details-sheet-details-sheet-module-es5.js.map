{"version":3,"sources":["webpack:///src/app/modals/details-sheet/details-sheet.page.html","webpack:///src/app/modals/details-sheet/details-sheet.page.scss","webpack:///src/app/modals/details-sheet/details-sheet.page.ts"],"names":["DetailsSheetPage","api","alertController","bottomSheetRef","data","util","router","orderData","order","console","log","status","mWord","toLowerCase","replace","toUpperCase","substr","dismiss","create","cssClass","message","buttons","text","role","handler","blah","body","id","_id","updateOrderStat","subscribe","orderUpdate","next","openSnackBar","error","alert","present","presentAlertCancel","presentAlertPrompt","navigateByUrl","header","inputs","name","type","placeholder","alertData","note","notes","selector","template"],"mappings":"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","file":"default~calendar-calendar-module~home-home-module~modals-details-sheet-details-sheet-module-es5.js","sourcesContent":["export default \"\\r\\n<div *ngIf=\\\"orderData\\\" class=\\\"container p-b-10\\\">\\r\\n\\r\\n  <h5 class=\\\"text-center\\\">Order Details</h5>\\r\\n\\r\\n  <div>\\r\\n    <div class=\\\"o-detail-title\\\">\\r\\n      <div>#{{orderData._id}}</div>\\r\\n      <span [style.color]=\\\"getStatusColor(orderData.status)\\\" class=\\\"status\\\">  ({{getStatus(orderData.status)}})</span>\\r\\n\\r\\n      <div>\\r\\n          <span>Date: {{util.getHumanShortDate(orderData.date)}}</span>\\r\\n          <br>\\r\\n          <span>Time: {{orderData.time}}</span>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n    <hr>\\r\\n\\r\\n\\r\\n    <mat-form-field appearance=\\\"outline\\\">\\r\\n      <mat-label>Customer Name</mat-label>\\r\\n      <input matInput [value]=\\\"orderData.name\\\" readonly>\\r\\n      <mat-icon matPrefix class=\\\"m-r-4\\\">person</mat-icon>\\r\\n    </mat-form-field>\\r\\n\\r\\n    <mat-form-field appearance=\\\"outline\\\">\\r\\n      <mat-label>Customer Email</mat-label>\\r\\n      <input matInput [value]=\\\"orderData.email\\\" readonly>\\r\\n      <mat-icon matPrefix class=\\\"m-r-4\\\">mail</mat-icon>\\r\\n    </mat-form-field>\\r\\n\\r\\n    <mat-form-field appearance=\\\"outline\\\">\\r\\n      <mat-label>Customer Address</mat-label>\\r\\n      <input matInput [value]=\\\"orderData.address\\\" readonly>\\r\\n      <mat-icon matPrefix class=\\\"m-r-4\\\">home</mat-icon>\\r\\n    </mat-form-field>\\r\\n\\r\\n    <mat-form-field appearance=\\\"outline\\\">\\r\\n      <mat-label>City</mat-label>\\r\\n      <input matInput [value]=\\\"orderData.city\\\" readonly>\\r\\n      <mat-icon matPrefix class=\\\"m-r-4\\\">location_city</mat-icon>\\r\\n    </mat-form-field>\\r\\n\\r\\n    <mat-form-field appearance=\\\"outline\\\">\\r\\n      <mat-label>Postcode</mat-label>\\r\\n      <input matInput [value]=\\\"orderData.postcode\\\" readonly>\\r\\n      <mat-icon matPrefix class=\\\"m-r-4\\\">map</mat-icon>\\r\\n    </mat-form-field>\\r\\n\\r\\n\\r\\n    <mat-form-field appearance=\\\"outline\\\">\\r\\n      <mat-label>Contact Number</mat-label>\\r\\n      <input matInput [value]=\\\"orderData.phone\\\" readonly>\\r\\n      <mat-icon matPrefix  class=\\\"m-r-4\\\">phone</mat-icon>\\r\\n    </mat-form-field>\\r\\n  </div>\\r\\n\\r\\n\\r\\n  <div>\\r\\n    <h5 class=\\\"text-center\\\">Piano Details</h5>\\r\\n\\r\\n    <mat-form-field appearance=\\\"outline\\\">\\r\\n      <mat-label>Piano Name</mat-label>\\r\\n      <input matInput [value]=\\\"orderData.pianoName\\\" readonly>\\r\\n    </mat-form-field>\\r\\n\\r\\n    <mat-form-field appearance=\\\"outline\\\">\\r\\n      <mat-label>Serial number</mat-label>\\r\\n      <input matInput [value]=\\\"orderData.serial? orderData.serial : 'Not added'\\\" readonly>\\r\\n    </mat-form-field>\\r\\n\\r\\n\\r\\n    <mat-form-field appearance=\\\"outline\\\">\\r\\n      <mat-label>Piano Type</mat-label>\\r\\n      <input matInput [value]=\\\"orderData.type\\\" readonly>\\r\\n    </mat-form-field>\\r\\n\\r\\n    <mat-form-field appearance=\\\"outline\\\">\\r\\n      <mat-label>Last Service</mat-label>\\r\\n      <input matInput [value]=\\\"orderData.lastService\\\" readonly>\\r\\n    </mat-form-field>\\r\\n\\r\\n\\r\\n    <mat-form-field appearance=\\\"outline\\\">\\r\\n      <mat-label>Notes</mat-label>\\r\\n      <input matInput [value]=\\\"orderData.notes ?  orderData.notes : 'No notes added'\\\" readonly>\\r\\n    </mat-form-field>\\r\\n\\r\\n\\r\\n  </div>\\r\\n  <div >\\r\\n    <h5 class=\\\"text-center\\\">Services Ordered</h5>\\r\\n    <ul>\\r\\n      <li *ngFor=\\\"let service of orderData.service\\\">{{service.name}}</li>\\r\\n    </ul>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"fs-16\\\" *ngIf=\\\"orderData.extended\\\">\\r\\n    <h5 class=\\\"m-t-30\\\">Edited Order Details</h5>\\r\\n    <hr>\\r\\n\\r\\n      <div class=\\\"p-details\\\">\\r\\n        <div class=\\\"p-detail-title\\\"> Booking Id</div>\\r\\n        <div class=\\\"p-detail-info\\\">{{orderData._id}}</div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"p-details\\\">\\r\\n        <div class=\\\"p-detail-title\\\">Status</div>\\r\\n        <div class=\\\"p-detail-info\\\">{{orderData.additional.status}}</div>\\r\\n      </div>\\r\\n\\r\\n\\r\\n      <div class=\\\"p-details\\\">\\r\\n        <div class=\\\"p-detail-title\\\">Total</div>\\r\\n        <div class=\\\"p-detail-info\\\">{{orderData.additional.total}}</div>\\r\\n      </div>\\r\\n\\r\\n\\r\\n    <h6 class=\\\"m-t-20\\\">New Services</h6>\\r\\n    <ul>\\r\\n      <li *ngFor=\\\"let service of orderData.additional.services\\\">{{service.name}}</li>\\r\\n    </ul>\\r\\n  </div>\\r\\n\\r\\n\\r\\n<!--  <div *ngIf=\\\"orderData.status === 'PAYMENT_CONFIRMED'\\\" class=\\\"d-flex justify-content-around\\\">-->\\r\\n<!--    <hr>-->\\r\\n\\r\\n<!--    <button (click)=\\\"changeStatus(1)\\\" class=\\\"cancel-btn\\\" mat-flat-button>Reject</button>-->\\r\\n<!--    <button (click)=\\\"changeStatus(2)\\\" class=\\\"comp-btn\\\"  mat-flat-button  >Confirm</button>-->\\r\\n<!--  </div>-->\\r\\n\\r\\n<!--  <div *ngIf=\\\"orderData.status === 'COMPLETE' || orderData.status === 'BOOKING_CONFIRMED' || orderData.status === 'CANCELLED'\\\" class=\\\"d-flex justify-content-around\\\">-->\\r\\n\\r\\n\\r\\n  <div class=\\\"d-flex justify-content-around\\\">\\r\\n    <hr>\\r\\n    <button *ngIf=\\\"!(orderData.status === 'CANCELLED' || orderData.status === 'COMPLETED' || orderData.status === 'REJECTED')\\\" class=\\\"cancel-btn\\\"\\r\\n            (click)=\\\"changeStatus(3)\\\"     mat-flat-button>Cancel\\r\\n    </button>\\r\\n    <button  *ngIf=\\\"!(orderData.status === 'CANCELLED' || orderData.status === 'COMPLETED' || orderData.status === 'REJECTED')\\\" class=\\\"comp-btn\\\"\\r\\n             (click)=\\\"changeStatus(4)\\\" mat-flat-button>Complete\\r\\n    </button>\\r\\n  </div>\\r\\n\\r\\n</div>\\r\\n\";","export default \".p-details {\\n  border: 1px solid #c4c4c4;\\n  margin-top: 5px;\\n  padding: 5px;\\n}\\n\\n.p-detail-title {\\n  color: #7d7d7d;\\n  font-size: 13px;\\n}\\n\\n.p-detail-info {\\n  color: #0d0d0d;\\n  font-size: 16px;\\n}\\n\\n.o-detail-title {\\n  color: #7d7d7d;\\n  font-size: 16px;\\n  margin-top: 5px;\\n}\\n\\n.o-detail-info {\\n  color: #0d0d0d;\\n  font-size: 18px;\\n  margin-left: 21px;\\n}\\n\\nhr {\\n  background: #7d7d7d;\\n}\\n\\nh6 {\\n  margin: 15px;\\n}\\n\\n.icon {\\n  font-size: 16px;\\n  height: 100%;\\n  vertical-align: middle;\\n  margin-right: 5px;\\n}\\n\\n.comp-btn {\\n  background: teal;\\n  color: white;\\n  padding: 1px 7px;\\n  margin-left: 10px;\\n}\\n\\n.cancel-btn {\\n  background: orangered;\\n  color: white;\\n  padding: 1px 7px;\\n}\\n\\nmat-icon {\\n  color: #8a2be2;\\n}\\n\\nh5 {\\n  color: #8a2be2;\\n}\\n\\n.mat-form-field-appearance-outline .mat-form-field-outline {\\n  color: #8a2be2 !important;\\n}\\n\\n.mat-form-field-appearance-outline .mat-form-field-outline-thick {\\n  color: #8a2be2 !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kYWxzL2RldGFpbHMtc2hlZXQvZGV0YWlscy1zaGVldC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSx5QkFBQTtFQUNBLGVBQUE7RUFDQSxZQUFBO0FBQ0Y7O0FBRUE7RUFDRSxjQUFBO0VBQ0EsZUFBQTtBQUNGOztBQUVBO0VBQ0UsY0FBQTtFQUNBLGVBQUE7QUFDRjs7QUFDQTtFQUNFLGNBQUE7RUFDQSxlQUFBO0VBQ0EsZUFBQTtBQUVGOztBQUVBO0VBQ0UsY0FBQTtFQUNBLGVBQUE7RUFDQSxpQkFBQTtBQUNGOztBQUVBO0VBQ0UsbUJBQUE7QUFDRjs7QUFFQTtFQUNFLFlBQUE7QUFDRjs7QUFHQTtFQUNFLGVBQUE7RUFDQSxZQUFBO0VBQ0Esc0JBQUE7RUFDQSxpQkFBQTtBQUFGOztBQUlBO0VBQ0UsZ0JBQUE7RUFDQSxZQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQTtBQURGOztBQUdBO0VBQ0UscUJBQUE7RUFDQSxZQUFBO0VBQ0EsZ0JBQUE7QUFBRjs7QUFHQTtFQUNFLGNBQUE7QUFBRjs7QUFHQTtFQUNFLGNBQUE7QUFBRjs7QUFJQTtFQUNFLHlCQUFBO0FBREY7O0FBSUE7RUFDRSx5QkFBQTtBQURGIiwiZmlsZSI6InNyYy9hcHAvbW9kYWxzL2RldGFpbHMtc2hlZXQvZGV0YWlscy1zaGVldC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIucC1kZXRhaWxze1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICNjNGM0YzQ7XHJcbiAgbWFyZ2luLXRvcDogNXB4O1xyXG4gIHBhZGRpbmc6IDVweDtcclxufVxyXG5cclxuLnAtZGV0YWlsLXRpdGxle1xyXG4gIGNvbG9yOiAjN2Q3ZDdkO1xyXG4gIGZvbnQtc2l6ZTogMTNweDtcclxufVxyXG5cclxuLnAtZGV0YWlsLWluZm97XHJcbiAgY29sb3I6ICMwZDBkMGQ7XHJcbiAgZm9udC1zaXplOiAxNnB4O1xyXG59XHJcbi5vLWRldGFpbC10aXRsZXtcclxuICBjb2xvcjogIzdkN2Q3ZDtcclxuICBmb250LXNpemU6IDE2cHg7XHJcbiAgbWFyZ2luLXRvcDogNXB4O1xyXG5cclxufVxyXG5cclxuLm8tZGV0YWlsLWluZm97XHJcbiAgY29sb3I6ICMwZDBkMGQ7XHJcbiAgZm9udC1zaXplOiAxOHB4O1xyXG4gIG1hcmdpbi1sZWZ0OiAyMXB4O1xyXG59XHJcblxyXG5ocntcclxuICBiYWNrZ3JvdW5kOiAjN2Q3ZDdkO1xyXG59XHJcblxyXG5oNntcclxuICBtYXJnaW46IDE1cHg7XHJcbn1cclxuXHJcblxyXG4uaWNvbntcclxuICBmb250LXNpemU6IDE2cHg7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbiAgbWFyZ2luLXJpZ2h0OiA1cHg7XHJcbn1cclxuXHJcblxyXG4uY29tcC1idG57XHJcbiAgYmFja2dyb3VuZDogdGVhbDtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgcGFkZGluZzogMXB4IDdweDtcclxuICBtYXJnaW4tbGVmdDogMTBweDtcclxufVxyXG4uY2FuY2VsLWJ0bntcclxuICBiYWNrZ3JvdW5kOiBvcmFuZ2VyZWQ7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG4gIHBhZGRpbmc6IDFweCA3cHg7XHJcbn1cclxuXHJcbm1hdC1pY29ue1xyXG4gIGNvbG9yOiAjOGEyYmUyO1xyXG59XHJcblxyXG5oNXtcclxuICBjb2xvcjogIzhhMmJlMjtcclxufVxyXG5cclxuXHJcbi5tYXQtZm9ybS1maWVsZC1hcHBlYXJhbmNlLW91dGxpbmUgLm1hdC1mb3JtLWZpZWxkLW91dGxpbmUge1xyXG4gIGNvbG9yOiAjOGEyYmUyIWltcG9ydGFudDtcclxufVxyXG5cclxuLm1hdC1mb3JtLWZpZWxkLWFwcGVhcmFuY2Utb3V0bGluZSAubWF0LWZvcm0tZmllbGQtb3V0bGluZS10aGljayB7XHJcbiAgY29sb3I6ICM4YTJiZTIhaW1wb3J0YW50O1xyXG59XHJcbiJdfQ== */\";","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_BOTTOM_SHEET_DATA, MatBottomSheetRef} from '@angular/material/bottom-sheet';\r\nimport {Order} from '../../models/Orders';\r\nimport {UtilService} from '../../services/util.service';\r\nimport {AlertController} from '@ionic/angular';\r\nimport {ApiServiceService} from '../../services/api-service.service';\r\nimport {Router} from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-details-sheet',\r\n  templateUrl: './details-sheet.page.html',\r\n  styleUrls: ['./details-sheet.page.scss'],\r\n})\r\nexport class DetailsSheetPage implements OnInit {\r\n  orderData: Order;\r\n\r\n  constructor(private api: ApiServiceService, public alertController: AlertController, private bottomSheetRef: MatBottomSheetRef<DetailsSheetPage>,\r\n              @Inject(MAT_BOTTOM_SHEET_DATA) public data: DialogData, public util: UtilService, private router: Router) { }\r\n\r\n  ngOnInit() {\r\n    this.orderData = this.data.order;\r\n    console.log('this is order data for popup', this.data.order);\r\n  }\r\n\r\n  getStatus(status: string) {\r\n    let mWord = status.toLowerCase();\r\n    mWord = mWord.replace('_', ' ');\r\n    return mWord[0].toUpperCase() + mWord.substr(1).toLowerCase();\r\n  }\r\n\r\n  getStatusColor(status: string) {\r\n    status = status.toUpperCase();\r\n    console.log('Status', status);\r\n    if (status === 'PAYMENT_CONFIRMED') {\r\n      return '#1E90FF';\r\n    } else if (status === 'COMPLETED') {\r\n      return '#4caf50';\r\n    } else if (status === 'PENDING') {\r\n      return '#4caf50';\r\n    } else if (status === 'CANCELLED') {\r\n      return '#d32f2f';\r\n    }else if (status === 'REJECTED') {\r\n      return '#e74e01';\r\n    } else {\r\n      return '#000000';\r\n    }\r\n  }\r\n\r\n  // show alert if service man rejects or cancel booking and change status accordingly\r\n\r\n  async presentAlertCancel(status) {\r\n    // close bottom sheet and open alert\r\n    this.bottomSheetRef.dismiss();\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      // header: 'Confirm!',\r\n      message: status === 1 ? 'Are you sure you want to reject this booking!!!' : 'Are you sure you want to cancel this booking!!!',\r\n      buttons: [\r\n        {\r\n          text: 'No',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n          handler: (blah) => {\r\n            console.log('Cancel: blah***********');\r\n          }\r\n        }, {\r\n          text: 'Yes',\r\n          handler: () => {\r\n            if (status === 1) {\r\n              // add api call to reject booking\r\n              const body = {\r\n                id : this.orderData._id,\r\n                status: 'REJECTED'\r\n              };\r\n              this.api.updateOrderStat(body).subscribe( data => {\r\n                this.util.orderUpdate.next(true);\r\n                console.log('this is data after rejection', data);\r\n                this.util.openSnackBar('Booking was rejected', '');\r\n              }, error => {\r\n                this.util.openSnackBar('An error occurred while rejecting booking', '');\r\n                console.log('this is error occurred', error);\r\n              });\r\n\r\n            } else if (status === 3){\r\n              // add api call to cancel booking\r\n              // const body = {\r\n              //   id : this.orderData._id,\r\n              //   status: 'CANCELLED_BY_SERVICE'\r\n              // };\r\n              // this.api.updateOrderStat(body).subscribe( data => {\r\n              //   console.log('this is data after updation', data);\r\n              //   this.util.openSnackBar('Booking was cancelled', '');\r\n              // }, error => {\r\n              //   this.util.openSnackBar('An error occurred while cancelling booking', '');\r\n              //   console.log('this is error occurred', error);\r\n              // });\r\n\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  // Change status of booking and available slot based on service man response\r\n\r\n  changeStatus(status: number) {\r\n    // status 1 means REJECTED\r\n    if (status === 1) {\r\n      this.presentAlertCancel(1);\r\n    }\r\n    // status 2 means BOOKING_CONFIRMED\r\n    else if (status === 2) {\r\n      const body = {\r\n        id : this.orderData._id,\r\n        status: 'BOOKING_CONFIRMED'\r\n      };\r\n      this.api.updateOrderStat(body).subscribe( data => {\r\n        this.util.orderUpdate.next(true);\r\n\r\n        console.log('this is data after updation', data);\r\n        this.util.openSnackBar('Booking accepted', '');\r\n      }, error => {\r\n        this.util.openSnackBar('An error occurred while accepting booking', '');\r\n        console.log('this is error occurred', error);\r\n      });\r\n    }\r\n    // status 3 means CANCELLED_BY_SERVICE\r\n    else if (status ===  3) {\r\n      // this.presentAlertCancel(3);\r\n      this.presentAlertPrompt();\r\n    }\r\n    // status 4 means COMPLETED\r\n    else if (status === 4) {\r\n      this.bottomSheetRef.dismiss();\r\n      this.router.navigateByUrl('/completion/' + this.orderData._id);\r\n    } else {\r\n\r\n    }\r\n\r\n  }\r\n  async presentAlertPrompt() {\r\n    this.bottomSheetRef.dismiss();\r\n\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Cancellation!',\r\n      inputs: [\r\n        // multiline input.\r\n        {\r\n          name: 'note',\r\n          id: 'note',\r\n          type: 'textarea',\r\n          placeholder: 'Enter Cancellation note'\r\n        },\r\n      ],\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n          handler: () => {\r\n            console.log('Confirm Cancel');\r\n          }\r\n        }, {\r\n          text: 'Ok',\r\n          handler: (alertData) => {\r\n            if (alertData.note === '') {\r\n              this.util.openSnackBar('Please enter cancellation note to cancel', 'ok');\r\n\r\n            } else {\r\n              const body = {\r\n                id : this.orderData._id,\r\n                status: 'REJECTED',\r\n                notes: alertData.note\r\n              };\r\n              this.api.updateOrderStat(body).subscribe( data => {\r\n                this.util.orderUpdate.next(true);\r\n                console.log('this is data after updation', data);\r\n                this.util.openSnackBar('Booking was cancelled', '');\r\n              }, error => {\r\n                this.util.openSnackBar('An error occurred while cancelling booking', '');\r\n                console.log('this is error occurred', error);\r\n              });\r\n\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nexport interface DialogData {\r\n  order: Order;\r\n}\r\n"]}